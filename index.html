<!doctype html>
<html lang="en">

<head>
    <title>Netflix</title>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
          integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <!-- Font-Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="./assets/css/index.css">

    <!-- Icon -->
    <link rel="shortcut icon" href="./assets/images/netflixIcon.png" type="image/x-icon">

    <!-- Google Font -->
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Raleway:wght@900&display=swap" rel="stylesheet">
</head>

<body>
<nav class="navbar navbar-expand-md navbar-dark bg-dark">
    <img src="./assets/images/netflixText.png" alt="logo" height="30" class="navbar-brand"/>
    <button class="navbar-toggler d-lg-none" type="button" data-toggle="collapse" data-target="#NavbarCollapse"
            aria-controls="NavbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="NavbarCollapse">
        <ul class="navbar-nav nav nav-pills">
            <li class="nav-item">
                <a class="nav-link active" id="home-tab" data-toggle="pill" href="#home" role="tab" aria-controls="home"
                   aria-selected="true" style="margin-right:10px"><i class="fa fa-home" aria-hidden="true"></i> Home
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="titles-tab" data-toggle="pill" href="#titles" role="tab" aria-controls="titles"
                   aria-selected="false" style="margin-right:10px"><i class="fa fa-camera" aria-hidden="true"></i>
                    Filmes
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="actors-tab" data-toggle="pill" href="#actors" role="tab" aria-controls="actors"
                   aria-selected="false" style="margin-right:10px"><i class="fa fa-user" aria-hidden="true"></i>
                    Atores
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="bookmarks-tab" data-toggle="pill" href="#bookmarks" role="tab"
                   aria-controls="bookmarks"
                   aria-selected="false" style="margin-right:10px"><i class="fa fa-bookmark" aria-hidden="true"></i>
                    Bookmarks
                </a>
            </li>
        </ul>
    </div>
</nav>

<div class="tab-content">
    <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">
        <main role="main">
            <div class="jumbotron-fluid hero">
                <div class="container hero-container">
                    <h4 class="display-3">Unlimited movies,</h4>
                    <h4 class="display-3">TV shows, and more.</h4>
                    <p>Watch anywhere. Cancel anytime.</p>
                </div>
            </div>
        </main>
    </div>
    <div class="tab-pane fade show" id="titles" role="tabpanel" aria-labelledby="titles-tab">
        <main role="main">
            <div class="title-bg">
                <div class="container">
                    <div class="form-group">
                        <label for="TitleSearchBar">Pesquisa</label>
                        <input type="text" class="form-control" name="TitleSearchBar" id="TitleSearchBar"
                               aria-describedby="SearchTitle" placeholder="Titulo"
                               data-bind="value: titleQuery, valueUpdate: 'keyup'">
                    </div>
                    <nav class=pagination-container aria-label="Title navigation">
                        <ul class="pagination">
                            <!-- ko if: currentTitlePage() > 1 -->
                            <li class="page-item page-button">
                                <a class="page-link" aria-label="Previous" data-bind="click: prevTitlePage">
                                    <i class="fa fa-arrow-left" aria-hidden="true"></i>
                                    <span class="sr-only">Previous</span>
                                </a>
                            </li>
                            <!-- /ko-->
                            <!-- ko if: currentTitlePage() <= 1 -->
                            <li class="page-item disabled page-button">
                                <a class="page-link" aria-label="Previous" data-bind="click: prevTitlePage">
                                    <i class="fa fa-arrow-left" aria-hidden="true"></i>
                                    <span class="sr-only">Previous</span>
                                </a>
                            </li>
                            <!-- /ko-->

                            <!-- ko foreach: titlePaginationArray() -->
                            <!-- ko if: $data == $parent.currentTitlePage() -->
                            <li class="page-item active">
                                <a class="page-link" data-bind="text: $data, click: $parent.setCurrentTitlePage"></a>
                            </li>
                            <!-- /ko -->
                            <!-- ko if: $data != $parent.currentTitlePage() -->
                            <li class="page-item">
                                <a class="page-link" data-bind="text: $data, click: $parent.setCurrentTitlePage"></a>
                            </li>
                            <!-- /ko -->
                            <!-- /ko -->

                            <!-- ko if: currentTitlePage() < totalTitlePages() -->
                            <li class="page-item page-button">
                                <a class="page-link" aria-label="Next" data-bind="click: nextTitlePage">
                                    <i class="fa fa-arrow-right" aria-hidden="true"></i>
                                    <span class="sr-only">Next</span>
                                </a>
                            </li>
                            <!-- /ko-->
                            <!-- ko if: currentTitlePage() >= totalTitlePages() -->
                            <li class="page-item page-button disabled">
                                <a class="page-link" aria-label="Next" data-bind="click: nextTitlePage">
                                    <i class="fa fa-arrow-right" aria-hidden="true"></i>
                                    <span class="sr-only">Next</span>
                                </a>
                            </li>
                            <!-- /ko-->
                        </ul>
                    </nav>
                    <table class="table table-striped table-sm small title-table">
                        <thead>
                        <tr>
                            <th scope="col">ID</th>
                            <th scope="col">Title</th>
                            <th scope="col" class="text-right"></th>
                        </tr>
                        </thead>
                        <tbody data-bind="foreach: titleSearchResults">
                        <tr>
                            <td data-bind="text: id"></td>
                            <td data-bind="text: name"></td>
                            <td class="text-right">
                                <button class="btn btn-sm" data-bind="click: $parent.showTitleModal">
                                    <a class="btn btn-sm">
                                        <i class="fa fa-eye" title="Selecione para ver detalhes"></i>
                                    </a>
                                </button>
                                <!-- ko if: $parent.isBookmarked(id) -->
                                <button class="btn btn-sm" data-bind="click: $parent.removeBookmark">
                                    <i class="fa fa-heart"
                                       title="Remover dos favoritos"></i>
                                </button>
                                <!-- /ko -->
                                <!-- ko if: !$parent.isBookmarked(id) -->
                                <button class="btn btn-sm" data-bind="click: $parent.bookmarkMovie">
                                    <i class="fa fa-heart-o"
                                       title="Selecione para adicionar aos favoritos!"></i>
                                </button>
                                <!-- /ko -->
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </main>
    </div>
    <div class="tab-pane fade show" id="actors" role="tabpanel" aria-labelledby="actors-tab">
        <main role="main">
            <div class="container">
                <div class="form-group">
                    <label for="ActorSearchBar">Pesquisa</label>
                    <input type="text" class="form-control" name="ActorSearchBar" id="ActorSearchBar"
                           aria-describedby="SearchActor" placeholder="Ator"
                           data-bind="value: actorQuery, valueUpdate: 'keyup'">
                </div>
                <nav class=pagination-container aria-label="Title navigation">
                    <ul class="pagination">
                        <!-- ko if: currentActorPage() > 1 -->
                        <li class="page-item page-button">
                            <a class="page-link" aria-label="Previous" data-bind="click: prevActorPage">
                                <i class="fa fa-arrow-left" aria-hidden="true"></i>
                                <span class="sr-only">Previous</span>
                            </a>
                        </li>
                        <!-- /ko-->
                        <!-- ko if: currentActorPage() <= 1 -->
                        <li class="page-item disabled page-button">
                            <a class="page-link" aria-label="Previous" data-bind="click: prevActorPage">
                                <i class="fa fa-arrow-left" aria-hidden="true"></i>
                                <span class="sr-only">Previous</span>
                            </a>
                        </li>
                        <!-- /ko-->

                        <!-- ko foreach: titlePaginationArray() -->
                        <!-- ko if: $data == $parent.currentActorPage() -->
                        <li class="page-item active">
                            <a class="page-link" data-bind="text: $data, click: $parent.setCurrentActorPage"></a>
                        </li>
                        <!-- /ko -->
                        <!-- ko if: $data != $parent.currentActorPage() -->
                        <li class="page-item">
                            <a class="page-link" data-bind="text: $data, click: $parent.setCurrentActorPage"></a>
                        </li>
                        <!-- /ko -->
                        <!-- /ko -->

                        <!-- ko if: currentActorPage() < totalActorPages() -->
                        <li class="page-item page-button">
                            <a class="page-link" aria-label="Next" data-bind="click: nextActorPage">
                                <i class="fa fa-arrow-right" aria-hidden="true"></i>
                                <span class="sr-only">Next</span>
                            </a>
                        </li>
                        <!-- /ko-->
                        <!-- ko if: currentActorPage() >= totalActorPages() -->
                        <li class="page-item page-button disabled">
                            <a class="page-link" aria-label="Next" data-bind="click: nextActorPage">
                                <i class="fa fa-arrow-right" aria-hidden="true"></i>
                                <span class="sr-only">Next</span>
                            </a>
                        </li>
                        <!-- /ko-->
                    </ul>
                </nav>
                <table class="table table-striped table-sm small">
                    <thead>
                    <tr>
                        <th scope="col">ID</th>
                        <th scope="col">Title</th>
                        <th scope="col" class="text-right"></th>
                    </tr>
                    </thead>
                    <tbody data-bind="foreach: actorSearchResults">
                    <tr>
                        <td data-bind="text: id"></td>
                        <td data-bind="text: name"></td>
                        <td class="text-right">
                            <button class="btn btn-sm" data-bind="click: $parent.showActorModal">
                                <a class="btn btn-sm">
                                    <i class="fa fa-eye" title="Selecione para ver detalhes"></i>
                                </a>
                            </button>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </main>
    </div>
    <div class="tab-pane fade show" id="bookmarks" role="tabpanel" aria-labelledby="bookmarks-tab">
        <main role="main">
            <div class="container">
                <h4>Filmes adicionados</h4>
                <!-- ko if: bookmarkedTitles().length > 0 -->
                <table class="table table-striped">
                    <thead>
                    <tr class="row">
                        <th scope="col" class="col-4">Nome</th>
                        <th scope="col" class="col-6">Adicionado em</th>
                        <th scope="col" class="col-2">Opções</th>
                    </tr>
                    </thead>
                    <tbody data-bind="foreach: bookmarkedTitles">
                    <tr class="row">
                        <td class="col-4" data-bind="text: name"></td>
                        <td class="col-6" data-bind="text: dateBookmarked"></td>
                        <td class="col-2 text-right row">
                            <button class="btn btn-sm col-sm-6" data-bind="click: $parent.showTitleModal">
                                <a class="btn btn-sm">
                                    <i class="fa fa-eye" title="Selecione para ver detalhes"></i>
                                </a>
                            </button>
                            <button class="btn btn-sm col-sm-6" data-bind="click: $parent.removeBookmark">
                                <a class="btn btn-sm">
                                    <i class="fa fa-trash" title="Remover dos favoritos"></i>
                                </a>
                            </button>
                        </td>
                    </tr>
                    </tbody>
                </table>
                <!-- /ko -->
                <!-- ko if: bookmarkedTitles().length == 0 -->
                <p>Nenhum favorito para mostrar. Para começar vá á Tab <i>Filmes</i> e favorite um filme!</p>
                <!-- /ko -->
                <button class="btn btn-danger" data-bind="click: deleteAllBookmarks">Delete all bookmarks</button>
            </div>
        </main>
    </div>
</div>

<!-- Modal for titles -->
<div class="modal fade" id="titleInfoModal" tabindex="-1" role="dialog" aria-labelledby="MoreInformationForTitle"
     aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" data-bind="text: currentTitleInfo().name"></h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <table class="table table-striped table-sm small">
                    <tr class="row">
                        <th class="col-md-3">Atores</th>
                        <td class="col-md-9">
                            <!-- ko if: currentTitleInfo().actors.length > 0 -->
                            <!-- ko foreach: currentTitleInfo().actors -->
                            <div role="button" data-bind="click: $parent.switchToActorInfo">
                                <i class=" fa fa-user-o"></i>
                                <a data-bind="text: name"></a>
                                (<span data-bind="text: id"></span>)
                            </div>
                            <!-- /ko -->
                            <!-- /ko -->
                            <!-- ko if: currentTitleInfo().actors.length == 0 -->
                            <i class=" fa fa-user-o"></i>
                            <a>Sem informação disponível para mostrar</a>
                            <!-- /ko -->
                        </td>
                    </tr>
                    <tr class="row">
                        <th class="col-md-3">Categorias</th>
                        <td class="col-md-9">
                            <div data-bind="foreach: currentTitleInfo().categories">
                                <i class=" fa fa-bookmark-o"></i>
                                <a data-bind="text: name"></a>
                                (<span data-bind="text: id"></span>)
                            </div>
                        </td>
                    </tr>
                    <tr class="row">
                        <th class="col-md-3">Países de lançamento</th>
                        <td class="col-md-9">
                            <div data-bind="foreach: currentTitleInfo().countries">
                                <i class=" fa fa-flag-o"></i>
                                <a data-bind="text: name"></a>
                                (<span data-bind="text: id"></span>)
                            </div>
                        </td>
                    </tr>
                    <tr class="row">
                        <th class="col-md-3">Breve descrição</th>
                        <td class="col-md-9" data-bind="text: currentTitleInfo().description"></td>
                    </tr>
                    <tr class="row">
                        <th class="col-md-3">Data adicionada</th>
                        <!-- ko if: currentTitleInfo().added != null -->
                        <td class="col-md-9" data-bind="text: currentTitleInfo().added"></td>
                        <!-- /ko -->
                        <!-- ko if: currentTitleInfo().added == null -->
                        <td class="col-md-9">Sem data adicionada</td>
                        <!-- /ko -->
                    </tr>
                    <tr class="row">
                        <th class="col-md-3">Diretores</th>
                        <td class="col-md-9">
                            <!-- ko if: currentTitleInfo().directors.length > 0 -->
                            <div data-bind="foreach: currentTitleInfo().directors">
                                <i class=" fa fa-user-o"></i>
                                <a data-bind="text: name"></a>
                                (<span data-bind="text: id"></span>)
                            </div>
                            <!-- /ko -->
                            <!-- ko if: currentTitleInfo().directors.length == 0 -->
                            <i class=" fa fa-user-o"></i>
                            <a>Sem informação para mostrar</a>
                            <!-- /ko -->
                        </td>
                    </tr>
                    <tr class="row">
                        <th class="col-md-3">Duração</th>
                        <td class="col-md-9" data-bind="text: currentTitleInfo().duration"></td>
                    </tr>
                    <tr class="row">
                        <th class="col-md-3">Classificação</th>
                        <td class="col-md-9">
                            <!-- ko if: currentTitleInfo().rating != null -->
                            <i class=" fa fa-star-o"></i>
                            <a data-bind="text: currentTitleInfo().rating.code"></a>
                            (<span data-bind="text: currentTitleInfo().rating.id"></span>)
                            <!-- /ko -->
                            <!-- ko if: currentTitleInfo().rating == null -->
                            <i class=" fa fa-star-o"></i>
                            <a>Classificação indisponível</a>
                            <!-- /ko -->
                        </td>
                    </tr>
                    <tr class="row">
                        <th class="col-md-3">Data de lançamento</th>
                        <td class="col-md-9" data-bind="text: currentTitleInfo().yearOfRelease"></td>
                    </tr>
                    <tr class="row">
                        <th class="col-md-3">Género</th>
                        <td class="col-md-9">
                            <i class=" fa fa-address-book-o"></i>
                            <a data-bind="text: currentTitleInfo().type.name"></a>
                            (<span data-bind="text: currentTitleInfo().type.id"></span>)
                        </td>
                    </tr>
                </table>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
<!-- Modal for actors -->
<div class="modal fade" id="actorInfoModal" tabindex="-1" role="dialog" aria-labelledby="MoreInformationForActor"
     aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" data-bind="text: currentActorInfo().name"></h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <p>Hi</p>
                <div data-bind="foreach: currentActorInfo().titles">
                    <p role="button" data-bind="text: name, click: $parent.switchToTitleInfo"></p>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<footer class="navbar navbar-dark fixed-bottom bg-dark">
    <div class="container">
        <div class="navbar-text small">&copy;ITW 2020 - Introdução ás Tecnologias Web</div>
        <div class="navbar-right navbar-text small d-none d-md-block">
            <a href="https://www.ua.pt" title="Universidade de Aveiro">Universidade de Aveiro</a>
        </div>
    </div>
</footer>

<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx"
        crossorigin="anonymous"></script>
<script src="https://ajax.aspnetcdn.com/ajax/knockout/knockout-3.5.0.js"></script>

<script src="./assets/js/requests.js"></script>
<script src="./assets/js/index.js"></script>
</body>

</html>